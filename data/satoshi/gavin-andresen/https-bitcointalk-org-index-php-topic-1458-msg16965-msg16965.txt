  
I bet you'd get a good approximation of hash rate if clients submitted their
best (highest difficulty) hash every N minutes. Over a period of a few hours
the average of all of those best hashes should be proportional to the client's
hash rate (unless a client were somehow repeatedly very lucky or unlucky, but
that would be extremely unlikely).  
  

